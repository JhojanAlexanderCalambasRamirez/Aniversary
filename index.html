<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro Aniversario</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/particles.css">
    <style>
        /* Overlay inicial */
        .fade-overlay-inline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 99999;
            pointer-events: none;
        }

        /* Bot√≥n de idioma */
        #languageToggle {
            position: fixed;
            top: 30px;
            right: 80px;
            z-index: 100000;
            padding: 8px 12px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            background-color: #ffeb3b;
        }

        /* Bot√≥n de m√∫sica */
        #musicToggle {
            position: fixed;
            top: 30px;
            right: 20px;
            z-index: 100000;
            padding: 8px 12px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            background-color: #ffeb3b;
        }
    </style>
</head>
<body>
    <!-- Overlay inicial -->
    <div class="fade-overlay fade-overlay-inline" id="fadeOverlay"></div>

    <!-- Part√≠culas -->
    <div id="particles-js"></div>

    <!-- Audio -->
    <audio id="backgroundMusic" autoplay>
        <source src="musica/Musica.mp3" type="audio/mpeg">
    </audio>

    <!-- Bot√≥n de m√∫sica -->
    <button id="musicToggle" class="music-control" aria-label="Control de m√∫sica">
        <span class="music-icon">üéµ</span>
    </button>

    <!-- Bot√≥n de idioma -->
    <button id="languageToggle"></button>

    <!-- Encabezado -->
    <header class="header">
        <div class="newspaper-header">
            <div class="header-line"></div>
            <h1 class="main-title">Nuestro Aniversario</h1>
            <p class="subtitle">Mr. and Ms. Torsey</p>
            <div class="header-line"></div>
        </div>
    </header>

    <!-- Contenido estilo peri√≥dico -->
    <main class="newspaper-container">
        <div class="articles-wrapper" id="articlesWrapper">
            <!-- Los art√≠culos se generar√°n din√°micamente con JavaScript -->
        </div>
    </main>

    <!-- Modal -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img id="modalImage" src="" alt="Foto seleccionada">
                </div>
                <div class="modal-text-container">
                    <h2 id="modalTitle"></h2>
                    <p id="modalText"></p>
                </div>
            </div>
            <div class="modal-navigation">
                <button id="prevPhoto" class="nav-btn">‚Üê Anterior</button>
                <span id="photoCounter" class="photo-counter"></span>
                <button id="nextPhoto" class="nav-btn">Siguiente ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="js/gallery.js"></script>

    <script>
        // -------------------------------
        // Detectar idioma inicial
        // -------------------------------
        const urlParams = new URLSearchParams(window.location.search);
        const lang = urlParams.get('lang') || 'es';

        // Configurar bot√≥n de idioma
        const langButton = document.getElementById('languageToggle');
        langButton.innerText = lang === 'es' ? 'English' : 'Espa√±ol';

        // -------------------------------
        // Cargar scripts seg√∫n idioma
        // -------------------------------
        if(lang === 'es'){
            document.write('<script src="js/photo-texts.js"><\/script>');
            document.write('<script src="js/articles.js"><\/script>');
        } else {
            document.write('<script src="js/photo-textsEnglish.js"><\/script>');
            document.write('<script src="js/articlesEnglish.js"><\/script>');
        }

        // -------------------------------
        // Cambiar idioma al presionar bot√≥n
        // -------------------------------
        langButton.addEventListener('click', function() {
            if(lang === 'es'){
                window.location.search = '?lang=en';
            } else {
                window.location.search = '?lang=es';
            }
        });

        // -------------------------------
        // Configuraci√≥n de part√≠culas
        // -------------------------------
        const isMobile = window.innerWidth <= 768;
        const particleCount = isMobile ? 60 : 150;
        const particleSize = isMobile ? 8 : 6;

        particlesJS('particles-js', {
            particles: {
                number: { value: particleCount, density: { enable: true, value_area: isMobile ? 400 : 600 } },
                color: { value: '#ffeb3b' },
                shape: { type: 'circle' },
                opacity: { value: 1, random: true, anim: { enable: true, speed: 3, opacity_min: 0.4, sync: false } },
                size: { value: particleSize, random: true, anim: { enable: true, speed: 4, size_min: isMobile ? 3 : 2, sync: false } },
                line_linked: { enable: false },
                move: { enable: true, speed: 3, direction: 'none', random: true, straight: false, out_mode: 'out', bounce: false, attract: { enable: false } }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: false }, onclick: { enable: false }, resize: true }
            },
            retina_detect: true
        });

        // -------------------------------
        // Fade inicial
        // -------------------------------
        document.addEventListener('DOMContentLoaded', function() {
            const fadeOverlay = document.getElementById('fadeOverlay');
            setTimeout(function() {
                fadeOverlay.style.transition = 'opacity 7s ease-in-out';
                fadeOverlay.style.opacity = '0';
                setTimeout(function() {
                    fadeOverlay.style.visibility = 'hidden';
                }, 7000);
            }, 100);
        });

        // -------------------------------
        // Audio
        // -------------------------------
        window.addEventListener('load', function() {
            const audio = document.getElementById('backgroundMusic');
            audio.volume = 0.7;
            const playAttempt = audio.play();
            if (playAttempt !== undefined) {
                playAttempt.catch(error => { console.log('Autoplay bloqueado, esperando interacci√≥n del usuario'); });
            }
        });
    </script>
</body>
</html>
