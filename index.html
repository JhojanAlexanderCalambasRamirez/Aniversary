<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro Aniversario</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/particles.css">
    <style>
        /* Estilo inline para asegurar que la pantalla negra aparezca inmediatamente */
        .fade-overlay-inline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 99999;
            pointer-events: none;
        }

        /* Bot√≥n de idioma */
        #languageToggle {
            position: fixed;
            top: 30px;
            right: 80px;
            z-index: 100000;
            padding: 8px 12px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            background-color: #ffeb3b;
        }
    </style>
</head>
<body>
    <!-- Capa de desvanecimiento inicial -->
    <div class="fade-overlay fade-overlay-inline" id="fadeOverlay"></div>

    <!-- Contenedor de part√≠culas -->
    <div id="particles-js"></div>

    <!-- Audio de fondo -->
    <audio id="backgroundMusic" autoplay>
        <source src="musica/Musica.mp3" type="audio/mpeg">
    </audio>

    <!-- Control de m√∫sica -->
    <button id="musicToggle" class="music-control" aria-label="Control de m√∫sica">
        <span class="music-icon">üéµ</span>
    </button>

    <!-- Bot√≥n para cambiar idioma -->
    <button id="languageToggle"></button>

    <!-- Encabezado -->
    <header class="header">
        <div class="newspaper-header">
            <div class="header-line"></div>
            <h1 class="main-title" id="mainTitle"></h1>
            <p class="subtitle" id="subtitle"></p>
            <div class="bible-verse" id="bibleVerse"></div>
            <div class="header-line"></div>
        </div>
    </header>

    <!-- Contenido estilo peri√≥dico -->
    <main class="newspaper-container">
        <div class="articles-wrapper" id="articlesWrapper">
            <!-- Los art√≠culos se generar√°n din√°micamente con JavaScript -->
        </div>
    </main>

    <!-- Modal para mostrar foto y texto -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img id="modalImage" src="" alt="Foto seleccionada">
                </div>
                <div class="modal-text-container">
                    <h2 id="modalTitle"></h2>
                    <p id="modalText"></p>
                </div>
            </div>
            <div class="modal-navigation">
                <button id="prevPhoto" class="nav-btn" id="prevBtn"></button>
                <span id="photoCounter" class="photo-counter"></span>
                <button id="nextPhoto" class="nav-btn" id="nextBtn"></button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <!-- Configuraci√≥n de idioma y traducci√≥n de textos est√°ticos -->
    <script>
        const lang = new URLSearchParams(window.location.search).get('lang') || 'es';

        // Traducci√≥n de textos est√°ticos
        const translations = {
            es: {
                languageButton: 'English',
                mainTitle: 'Nuestro Aniversario',
                subtitle: 'Mr. and Ms. Torsey',
                bibleVerse: 'Eclesiast√©s 4:9-12<br>9 M√°s valen dos que uno solo, pues tienen mejor remuneraci√≥n por su trabajo. 10 Porque si uno de ellos cae, el otro levantar√° a su compa√±ero; pero ¬°ay del que cae cuando no hay otro que lo levante! 11 Adem√°s, si dos se acuestan juntos se mantienen calientes, pero uno solo ¬øc√≥mo se calentar√°? 12 Y si alguien puede prevalecer contra el que est√° solo, dos lo resistir√°n. Un cordel de tres hilos no se rompe f√°cilmente.',
                prevBtn: '‚Üê Anterior',
                nextBtn: 'Siguiente ‚Üí'
            },
            en: {
                languageButton: 'Espa√±ol',
                mainTitle: 'Our Anniversary',
                subtitle: 'Mr. and Ms. Torsey',
                bibleVerse: 'Ecclesiastes 4:9-12<br>9 Two are better than one, because they have a good reward for their labor. 10 For if one of them falls, the other will lift up his companion. But woe to the one who falls when there is no other to lift him up! 11 Also, if two lie together, they keep warm, but how can one keep warm alone? 12 And if one can prevail against him who is alone, two will resist him. A threefold cord is not quickly broken.',
                prevBtn: '‚Üê Previous',
                nextBtn: 'Next ‚Üí'
            }
        };

        const texts = translations[lang];
        document.getElementById('languageToggle').innerText = texts.languageButton;
        document.getElementById('mainTitle').innerText = texts.mainTitle;
        document.getElementById('subtitle').innerText = texts.subtitle;
        document.getElementById('bibleVerse').innerHTML = texts.bibleVerse;
        document.getElementById('prevPhoto').innerText = texts.prevBtn;
        document.getElementById('nextPhoto').innerText = texts.nextBtn;

        // Cargar scripts din√°micos seg√∫n idioma
        if (lang === 'es') {
            document.write('<script src="js/photo-texts.js"><\/script>');
            document.write('<script src="js/articles.js"><\/script>');
        } else {
            document.write('<script src="js/photo-textsEnglish.js"><\/script>');
            document.write('<script src="js/articlesEnglish.js"><\/script>');
        }

        // Bot√≥n de cambio de idioma
        document.getElementById('languageToggle').addEventListener('click', function() {
            if(lang === 'es'){
                window.location.search = '?lang=en';
            } else {
                window.location.search = '?lang=es';
            }
        });
    </script>

    <!-- Gallery.js -->
    <script src="js/gallery.js"></script>

    <!-- Configuraci√≥n de part√≠culas -->
    <script>
        const isMobile = window.innerWidth <= 768;
        const particleCount = isMobile ? 60 : 150;
        const particleSize = isMobile ? 8 : 6;

        particlesJS('particles-js', {
            particles: {
                number: { value: particleCount, density: { enable: true, value_area: isMobile ? 400 : 600 } },
                color: { value: '#ffeb3b' },
                shape: { type: 'circle' },
                opacity: { value: 1, random: true, anim: { enable: true, speed: 3, opacity_min: 0.4, sync: false } },
                size: { value: particleSize, random: true, anim: { enable: true, speed: 4, size_min: isMobile ? 3 : 2, sync: false } },
                line_linked: { enable: false },
                move: { enable: true, speed: 3, direction: 'none', random: true, straight: false, out_mode: 'out', bounce: false, attract: { enable: false } }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: false }, onclick: { enable: false }, resize: true }
            },
            retina_detect: true
        });
    </script>

    <!-- Fade overlay y reproducci√≥n de audio -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fadeOverlay = document.getElementById('fadeOverlay');
            setTimeout(() => {
                fadeOverlay.style.transition = 'opacity 7s ease-in-out';
                fadeOverlay.style.opacity = '0';
                setTimeout(() => fadeOverlay.style.visibility = 'hidden', 7000);
            }, 100);

            // Audio
            const audio = document.getElementById('backgroundMusic');
            audio.volume = 0.7;
            const playAttempt = audio.play();
            if (playAttempt !== undefined) playAttempt.catch(err => console.log('Autoplay bloqueado'));

        });
    </script>
</body>
</html>
